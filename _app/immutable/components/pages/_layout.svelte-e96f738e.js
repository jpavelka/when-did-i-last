import{S as te,i as le,s as ae,C as fe,e as W,b as y,D as de,f as D,t as T,h as d,q as L,r as C,E as A,k as m,a as I,l as h,m as $,c as w,F as f,g as _e,d as pe,n as v,G as me,H as he,I as se,J as ne,K as re,L as oe,M as ie,N as ue,O as ce,w as be,x as ke,y as ve,z as $e}from"../../chunks/index-9a71f3bc.js";import{a as x,s as ge,d as ye,b as Ee,t as ee,c as Ie,f as B}from"../../chunks/index-79c48882.js";function we(r){let e;return{c(){e=L("Error encountered - please try again.")},l(a){e=C(a,"Error encountered - please try again.")},m(a,t){y(a,e,t)},p:A,i:A,o:A,d(a){a&&d(e)}}}function Le(r){let e,a,t,l,s,n,i;const _=[De,Ce],u=[];function p(o,c){return o[0]?0:1}return l=p(r),s=u[l]=_[l](r),{c(){e=m("h1"),a=L("When Did I Last..."),t=I(),s.c(),n=W()},l(o){e=h(o,"H1",{});var c=$(e);a=C(c,"When Did I Last..."),c.forEach(d),t=w(o),s.l(o),n=W()},m(o,c){y(o,e,c),f(e,a),y(o,t,c),u[l].m(o,c),y(o,n,c),i=!0},p(o,c){let b=l;l=p(o),l===b?u[l].p(o,c):(_e(),T(u[b],1,1,()=>{u[b]=null}),pe(),s=u[l],s?s.p(o,c):(s=u[l]=_[l](o),s.c()),D(s,1),s.m(n.parentNode,n))},i(o){i||(D(s),i=!0)},o(o){T(s),i=!1},d(o){o&&d(e),o&&d(t),u[l].d(o),o&&d(n)}}}function Ce(r){let e,a,t,l,s,n,i,_,u,p,o,c,b,R,N,q,M,S,P,j,O,U,V,z,G,J=Pe;return{c(){e=m("div"),a=m("form"),t=m("h2"),l=L("Hello! Please log in."),s=I(),n=m("div"),i=m("label"),_=L("Email:"),u=I(),p=m("input"),o=I(),c=m("label"),b=L("Password:"),R=I(),N=m("input"),q=I(),M=I(),S=m("div"),P=m("button"),j=L("Sign In"),this.h()},l(k){e=h(k,"DIV",{});var F=$(e);a=h(F,"FORM",{});var E=$(a);t=h(E,"H2",{});var K=$(t);l=C(K,"Hello! Please log in."),K.forEach(d),s=w(E),n=h(E,"DIV",{class:!0});var g=$(n);i=h(g,"LABEL",{for:!0});var Q=$(i);_=C(Q,"Email:"),Q.forEach(d),u=w(g),p=h(g,"INPUT",{id:!0,type:!0,class:!0}),o=w(g),c=h(g,"LABEL",{for:!0});var X=$(c);b=C(X,"Password:"),X.forEach(d),R=w(g),N=h(g,"INPUT",{id:!0,type:!0,class:!0}),g.forEach(d),q=w(E),M=w(E),S=h(E,"DIV",{});var Y=$(S);P=h(Y,"BUTTON",{type:!0});var Z=$(P);j=C(Z,"Sign In"),Z.forEach(d),Y.forEach(d),E.forEach(d),F.forEach(d),this.h()},h(){v(i,"for","email"),v(p,"id","email"),v(p,"type","email"),v(p,"class","svelte-1gkt4ll"),v(c,"for","password"),v(N,"id","password"),v(N,"type","password"),v(N,"class","svelte-1gkt4ll"),v(n,"class","formClass svelte-1gkt4ll"),v(P,"type","submit")},m(k,F){y(k,e,F),f(e,a),f(a,t),f(t,l),f(a,s),f(a,n),f(n,i),f(i,_),f(n,u),f(n,p),f(n,o),f(n,c),f(c,b),f(n,R),f(n,N),f(a,q),f(a,M),f(a,S),f(S,P),f(P,j),V=!0,z||(G=me(a,"submit",he(r[1])),z=!0)},p(k,F){r=k},i(k){V||(D(J),se(()=>{U&&U.end(1),O=ne(e,B,{duration:H,delay:H}),O.start()}),V=!0)},o(k){T(J),O&&O.invalidate(),U=re(e,B,{duration:H}),V=!1},d(k){k&&d(e),k&&U&&U.end(),z=!1,G()}}}function De(r){let e,a,t,l;const s=r[4].default,n=oe(s,r,r[3],null);return{c(){e=m("div"),n&&n.c()},l(i){e=h(i,"DIV",{});var _=$(e);n&&n.l(_),_.forEach(d)},m(i,_){y(i,e,_),n&&n.m(e,null),l=!0},p(i,_){r=i,n&&n.p&&(!l||_&8)&&ie(n,s,r,r[3],l?ce(s,r[3],_,null):ue(r[3]),null)},i(i){l||(D(n,i),se(()=>{t&&t.end(1),a=ne(e,B,{duration:H,delay:H}),a.start()}),l=!0)},o(i){T(n,i),a&&a.invalidate(),t=re(e,B,{duration:H}),l=!1},d(i){i&&d(e),n&&n.d(i),i&&t&&t.end()}}}function Te(r){let e;return{c(){e=L("Loading...")},l(a){e=C(a,"Loading...")},m(a,t){y(a,e,t)},p:A,i:A,o:A,d(a){a&&d(e)}}}function Ne(r){let e,a,t={ctx:r,current:null,token:null,hasCatch:!0,pending:Te,then:Le,catch:we,blocks:[,,,]};return fe(r[2],t),{c(){e=W(),t.block.c()},l(l){e=W(),t.block.l(l)},m(l,s){y(l,e,s),t.block.m(l,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,a=!0},p(l,[s]){r=l,de(t,r,s)},i(l){a||(D(t.block),a=!0)},o(l){for(let s=0;s<3;s+=1){const n=t.blocks[s];T(n)}a=!1},d(l){l&&d(e),t.block.d(l),t.token=null,t=null}}}let Pe=null;const H=200;function Ae(r,e,a){let{$$slots:t={},$$scope:l}=e,s=!1;x.onAuthStateChanged(async u=>{if(u){await u.getIdTokenResult(),a(0,s=!0);const p=ge(ye,"tasks",u.uid);Ee(p).then(o=>{const c=Object.entries(o.data().tasks).map(b=>(b[1].id=b[0],b[1]));ee.update(()=>c)}).catch(o=>console.log("error",o))}else a(0,s=!1),ee.update(()=>[])});const n=u=>{const{email:p,password:o}=u.target.elements;Ie(p.value,o.value)},_=(async()=>x.currentUser)();return r.$$set=u=>{"$$scope"in u&&a(3,l=u.$$scope)},[s,n,_,l,t]}class He extends te{constructor(e){super(),le(this,e,Ae,Ne,ae,{})}}function Se(r){let e;const a=r[0].default,t=oe(a,r,r[1],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,s){t&&t.m(l,s),e=!0},p(l,s){t&&t.p&&(!e||s&2)&&ie(t,a,l,l[1],e?ce(a,l[1],s,null):ue(l[1]),null)},i(l){e||(D(t,l),e=!0)},o(l){T(t,l),e=!1},d(l){t&&t.d(l)}}}function Ue(r){let e,a;return e=new He({props:{$$slots:{default:[Se]},$$scope:{ctx:r}}}),{c(){be(e.$$.fragment)},l(t){ke(e.$$.fragment,t)},m(t,l){ve(e,t,l),a=!0},p(t,[l]){const s={};l&2&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(t){a||(D(e.$$.fragment,t),a=!0)},o(t){T(e.$$.fragment,t),a=!1},d(t){$e(e,t)}}}function Fe(r,e,a){let{$$slots:t={},$$scope:l}=e;return r.$$set=s=>{"$$scope"in s&&a(1,l=s.$$scope)},[t,l]}class We extends te{constructor(e){super(),le(this,e,Fe,Ue,ae,{})}}export{We as default};
